<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Helix (helix.Helix)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">helix</a> &#x00BB; Helix</nav><header class="odoc-preamble"><h1>Module <code><span>Helix</span></code></h1><p>Library for building reactive web interfaces.</p></header><nav class="odoc-toc"><ul><li><a href="#example">Example</a></li><li><a href="#reactive-views">Reactive views</a></li><li><a href="#dynamic-attributes">Dynamic attributes</a></li><li><a href="#syntax">Syntax</a></li></ul></nav><div class="odoc-content"><h4 id="example"><a href="#example" class="anchor"></a>Example</h4><pre class="language-ocaml"><code>open Helix
open Stdweb

let counter () =
  let count = Signal.make 0 in
  let open Html in
  div
    [ style_list [ (&quot;border&quot;, &quot;1px solid #eee&quot;); (&quot;padding&quot;, &quot;1em&quot;) ] ]
    [
      h2 [] [ text &quot;Counter&quot; ];
      div [] [ text &quot;Compute a count.&quot; ];
      div []
        [
          button [ on_click (fun _ -&gt; Signal.update (fun n -&gt; n + 1) count) ] [ text &quot;+&quot; ];
          button [ on_click (fun _ -&gt; Signal.update (fun n -&gt; n - 1) count) ] [ text &quot;-&quot; ];
          div
            [
              style_list [ (&quot;font-size&quot;, &quot;32px&quot;) ];
              bind
                (fun n -&gt;
                  if n &lt; 0 then style_list [ (&quot;color&quot;, &quot;red&quot;) ]
                  else style_list [ (&quot;color&quot;, &quot;blue&quot;) ])
                count;
            ]
            [ show (fun n -&gt; text (string_of_int n)) count ];
        ];
    ]

let () =
  match Dom.Document.get_element_by_id &quot;root&quot; with
  | Some root -&gt; Html.mount root (counter ())
  | None -&gt; failwith &quot;No #root element found&quot;</code></pre><div class="odoc-spec"><div class="spec type anchored" id="type-html"><a href="#type-html" class="anchor"></a><code><span><span class="keyword">type</span> html</span><span> = <a href="../Html/index.html#type-html">Html.html</a></span></code></div><div class="spec-doc"><p>An alias for <a href="../Html/index.html#type-html"><code>Html.html</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-attr"><a href="#type-attr" class="anchor"></a><code><span><span class="keyword">type</span> attr</span><span> = <a href="../Html/index.html#type-attr">Html.attr</a></span></code></div><div class="spec-doc"><p>An alias for <a href="../Html/index.html#type-attr"><code>Html.attr</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-signal"><a href="#type-signal" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a signal</span></span><span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Signal</span>.t</span></span></code></div><div class="spec-doc"><p>An alias for <code>Signal.t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-signal"><a href="#val-signal" class="anchor"></a><code><span><span class="keyword">val</span> signal : <span><span class="optlabel">?equal</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?label</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-signal">signal</a></span></span></code></div><div class="spec-doc"><p>An alias for <code>Signal.make</code>.</p></div></div><h2 id="reactive-views"><a href="#reactive-views" class="anchor"></a>Reactive views</h2><div class="odoc-spec"><div class="spec value anchored" id="val-show"><a href="#val-show" class="anchor"></a><code><span><span class="keyword">val</span> show : <span><span class="optlabel">?label</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a></span></code></div><div class="spec-doc"><p><code>show to_html signal</code> is a dynamic HTML node created from <code>signal</code> values using <code>to_html</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_some"><a href="#val-show_some" class="anchor"></a><code><span><span class="keyword">val</span> show_some : <span><span class="optlabel">?label</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> option</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a></span></code></div><div class="spec-doc"><p><code>show_some</code> is similar to <a href="#val-show"><code>show</code></a>, but operates on reactive option values. When the signal's value is <code>None</code>, <code>Html.empty</code> is rendered.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_ok"><a href="#val-show_ok" class="anchor"></a><code><span><span class="keyword">val</span> show_ok : 
  <span><span class="optlabel">?label</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-html">html</a></span></code></div><div class="spec-doc"><p><code>show_ok</code> is similar to <a href="#val-show"><code>show</code></a>, but operates on reactive result values. When the signal's value is <code>Error _</code>, <code>Html.empty</code> is rendered.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-each"><a href="#val-each" class="anchor"></a><code><span><span class="keyword">val</span> each : <span><span class="optlabel">?key</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> list</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a></span></code></div><div class="spec-doc"><p><code>each to_html signal</code> reactively renders items from <code>signal</code> with <code>to_html</code>.</p><pre class="language-ocaml"><code>let items = Signal.make [ 1; 2; 3 ] in
ul [] [ each (fun item -&gt; li [] [ int item ]) items ]</code></pre></div></div><h2 id="dynamic-attributes"><a href="#dynamic-attributes" class="anchor"></a>Dynamic attributes</h2><div class="odoc-spec"><div class="spec value anchored" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span><span class="keyword">val</span> bind : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-attr">Html.attr</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Signal</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-attr">Html.attr</a></span></code></div><div class="spec-doc"><p><code>bind to_attr signal</code> is a dynamic HTML attribute created from <code>signal</code> values using <code>to_attr</code>.</p><pre class="language-ocaml"><code>let style = Signal.make [ (&quot;color&quot;, &quot;red&quot;) ] in
div [ Html.bind Html.style style ] [ text &quot;Hello!&quot; ]</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_some"><a href="#val-bind_some" class="anchor"></a><code><span><span class="keyword">val</span> bind_some : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-attr">Html.attr</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> option</span> <span class="xref-unresolved">Signal</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-attr">Html.attr</a></span></code></div><div class="spec-doc"><p><code>bind_some</code> is similar to <a href="#val-bind"><code>bind</code></a>, but operates on reactive option values. When the signal's value is <code>None</code>, an empty attribute is produced.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_ok"><a href="#val-bind_ok" class="anchor"></a><code><span><span class="keyword">val</span> bind_ok : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-attr">Html.attr</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Signal</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-attr">Html.attr</a></span></code></div><div class="spec-doc"><p><code>bind_ok</code> is similar to <a href="#val-bind"><code>bind</code></a>, but operates on reactive result values. When the signal's value is <code>Error _</code>, an empty attribute is produced.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-toggle"><a href="#val-toggle" class="anchor"></a><code><span><span class="keyword">val</span> toggle : <span><span class="label">on</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Signal</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Html/index.html#type-attr">Html.attr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-attr">Html.attr</a></span></code></div><div class="spec-doc"><p><code>toggle ~on:pred attr s</code> is <code>attr</code> if <code>pred x</code> is <code>true</code> and <code>Html.empty</code> otherwise, where <code>x</code> is the value of <code>s</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conditional"><a href="#val-conditional" class="anchor"></a><code><span><span class="keyword">val</span> conditional : <span><span class="label">on</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Signal</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Html/index.html#type-html">Html.html</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-html">Html.html</a></span></code></div><div class="spec-doc"><p><code>conditional on:signal</code> an attribute that shows the element if <code>signal</code> is <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-visible"><a href="#val-visible" class="anchor"></a><code><span><span class="keyword">val</span> visible : <span><span class="label">on</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Signal</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Html/index.html#type-attr">Html.attr</a></span></code></div><div class="spec-doc"><p><code>visible ~on:signal</code> is a reactive attribute that controls the <code>display</code> style of HTML elements. When <code>signal</code> is <code>false</code> this attribute is <code>display: none</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Mouse"><a href="#module-Mouse" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Mouse/index.html">Mouse</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Mouse signals.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Time"><a href="#module-Time" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Time/index.html">Time</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Time signals.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Http"><a href="#module-Http" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Http/index.html">Http</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>HTTP requests.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-History"><a href="#module-History" class="anchor"></a><code><span><span class="keyword">module</span> <a href="History/index.html">History</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Browser location and navigation helpers.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Router"><a href="#module-Router" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Router/index.html">Router</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Reactive routing.</p></div></div><h2 id="syntax"><a href="#syntax" class="anchor"></a>Syntax</h2><p><code>let</code> operators are provided to simplify rendering signals to HTML: <code>(let$)</code> and <code>(and$)</code>.</p><p>Example:</p><pre class="language-ocaml"><code>let view user_id todo_title =
  let$ user_id = Signal.map int_of_string user_id in
  and$ todo_title in
  let open Html in
  div [] [ h2 [] [ text &quot;User id: &quot;; text user_id ]; h3 [] [ text &quot;Todo: &quot;; todo_title ] ]</code></pre><p>Which is the same as:</p><pre class="language-ocaml"><code>let view user_id todo_title =
  let user_id = Signal.map int_of_string site_id in
  show
    (fun (user_id, todo_title) -&gt;
      let open Html in
      div [] [ h2 [] [ text &quot;User id: &quot;; text user_id ]; h3 [] [ text &quot;Todo: &quot;; todo_title ] ])
    (Signal.pair user_id todo_title)</code></pre><p>Additionally, reactive attributes can be bound with <code>let@</code> and <code>and@</code>.</p><div class="odoc-spec"><div class="spec value anchored" id="val-let$"><a href="#val-let$" class="anchor"></a><code><span><span class="keyword">val</span> let$ : <span><span><span class="type-var">'a</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-html">html</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and$"><a href="#val-and$" class="anchor"></a><code><span><span class="keyword">val</span> and$ : <span><span><span class="type-var">'a</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-signal">signal</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let@"><a href="#val-let@" class="anchor"></a><code><span><span class="keyword">val</span> let@ : <span><span><span class="type-var">'a</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-attr">attr</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-attr">attr</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and@"><a href="#val-and@" class="anchor"></a><code><span><span class="keyword">val</span> and@ : <span><span><span class="type-var">'a</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-signal">signal</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-signal">signal</a></span></span></code></div></div><p>View debugging</p><div class="odoc-spec"><div class="spec value anchored" id="val-enable_debug"><a href="#val-enable_debug" class="anchor"></a><code><span><span class="keyword">val</span> enable_debug : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set to <code>true</code> to activate visual debugging details.</p><p>If enabled, all reactive elements will be annoated with rendering details. The following format is used: <code>show:{elem_count}/{elem_label?}#{update_count}</code>, where:</p><ul><li><code>{elem_count}</code> is the sequential count assigned to each <code>show</code> element;</li><li><code>{elem_label}</code> is the optional user-provided label for the <code>show</code> element;</li><li><code>{update_count}</code> is the sequential count of re-renders of the same <code>show</code> element.</li></ul><p>Note that the <code>update_count</code> is, in practice, the number of signal emits.</p><p>With each update, the color of the container will change.</p></div></div></div></body></html>
